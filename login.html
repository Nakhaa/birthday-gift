<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Joining Party</title>
        <link rel="stylesheet" href="login.css">
    </head>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
        let attempts = 3;
        let revealed = false;
        const validAnswers = [
            "ngeselin", "jelek", "ganteng", "baik", "pinter",
            "cerdas", "tampan", "penyayang", "peduli", "perhatian"
        ];

        const passInput = document.getElementById("password");
        const message = document.getElementById("login-message");
        const hint = document.getElementById("hint");
        const hintBox = document.getElementById("hintBox");

        function checkPassword(event) {
            event.preventDefault();
            const userInput = passInput.value.trim().toLowerCase();

            if (validAnswers.includes(userInput)) {
                message.style.color = "green";
                message.textContent = "ğŸ‰ Password benar! Selamat datang, sayang ğŸ’–";
                setTimeout(() => {
                    window.location.href = "birthdaycake.html";
                }, 1200);
                return false;
            }

            if (!revealed) {
                attempts--;
                if (attempts > 0) {
                    message.style.color = "#ff4b5c";
                    message.textContent = `ğŸ˜… Salah ya~ coba lagi yaa (${attempts} percobaan tersisa)`;
                } else {
                    revealed = true;
                    message.style.color = "#d9534f";
                    message.textContent = "ğŸ’” Udah 3x salah nih...";
                    hint.textContent = "lihat pw ğŸ”";

                    const randomCorrect = validAnswers[Math.floor(Math.random() * validAnswers.length)];
                    hintBox.textContent = `Masa ga tauuuu :( pw-nya itu "${randomCorrect}" ğŸ¥º`;

                    hint.addEventListener("mouseenter", () => {
                        hintBox.style.opacity = "1";
                        hintBox.style.visibility = "visible";
                        hintBox.style.transform = "translateY(-8px)";
                    });
                    hint.addEventListener("mouseleave", () => {
                        hintBox.style.opacity = "0";
                        hintBox.style.visibility = "hidden";
                        hintBox.style.transform = "translateY(0)";
                    });
                }
            } else {
                message.style.color = "#ff4b5c";
                message.textContent = "ğŸ˜ masa macii salahhh. Kan dah dikasii tauuuu~";
            }

            passInput.value = "";
            return false;
        }

        document.querySelector(".login__form").addEventListener("submit", checkPassword);

        // ====== ğŸµ Bagian Musik ======
        const music = document.getElementById("bgMusic");
        const btn = document.getElementById("musicBtn");

        // Autoplay di-mute (agar lolos kebijakan browser)
        music.muted = true;
        music.play().then(() => {
            console.log("Musik autoplay berhasil (tanpa suara).");
            // unmute setelah 2 detik
            setTimeout(() => { music.muted = false; }, 2000);
            btn.textContent = "â¸ Pause Music";
        }).catch(() => {
            console.log("Autoplay diblokir ğŸ˜… â€” tunggu interaksi user");
        });

        // Jika user klik tombol musik
        btn.addEventListener("click", () => {
            if (music.paused) {
                music.muted = false;
                music.play();
                btn.textContent = "â¸ Pause Music";
            } else {
                music.pause();
                btn.textContent = "ğŸµ Play Music";
            }
        });

        // Jika user klik di mana pun â†’ mulai musik
        document.body.addEventListener("click", () => {
            if (music.paused) {
                music.muted = false;
                music.play();
                btn.textContent = "â¸ Pause Music";
            }
        }, { once: true });
    });
    </script>


    <body>
    <div class="login__wrapper">
        <div class="login__card">
            <h2 class="login__title">ğŸ€ Welcome to the Party ğŸ€</h2>
            <p class="login__subtitle">Log in to join Mufidaâ€™s birthday celebration ğŸ‚</p>
            <form class="login__form" onsubmit="return checkPassword(event)">
                <div class="form__group">
                    <input type="text" id="username" placeholder="ğŸˆ Username" required>
                </div>

                <div class="form__group password__group">
                    <input type="text" id="password" placeholder="ğŸ’– Password" required>
                    <span class="hint" id="hint">hint ğŸ’­</span>

                    <!-- Kotak hint tersembunyi (baru muncul saat hover) -->
                    <div id="hintBox" class="hint-box">
                        Satu kata untuk menggambarkan pacar kamu (naufal) orangnya kaya gimanaaa?
                    </div>
                </div>

                <button type="submit" class="login__btn">Login Now ğŸ’•</button>
                <p id="login-message" class="login__message"></p>
            </form>


            <div class="login__decoration">
                <img src="./images/balloon1.png" class="float-balloon" alt="balloon">
                <img src="./images/decorate_flower.png" class="float-flower" alt="flower">
            </div>
        </div>
    </div>

    <button id="musicBtn" class="music-btn">ğŸµ Play Music</button>

    <audio id="bgMusic" loop>
      <source src="audio/happy_song.mp3" type="audio/mpeg" />
    </audio>

    </body>
</html>