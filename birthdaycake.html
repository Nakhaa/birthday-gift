<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Birthday Cake</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Sriracha&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="birthdaycake.css" />
  </head>

  <body>
    <div class="decorate_star star1"></div>
    <div class="decorate_star star2"></div>
    <div class="decorate_star star3"></div>
    <div class="decorate_star star4"></div>
    <div class="decorate_star star5"></div>

    <img src="images/balloon1.png" alt="balloon" class="balloon_one" />
    <img src="images/balloon2.png" alt="balloon" class="balloon_two" />

    <h1>Selamat Ulang Tahun My Kittennn <span class="heart">ğŸ’–</span></h1>

    <div class="cake-container">
      <img src="images/cake.png" alt="cake" class="cake visible" id="cake" />
      <p class="instruction" id="instruction">Tekan Enter untuk meniup lilin ğŸ‚</p>
    </div>

    <div class="final-message" id="final-message">
      <p>
        Semoga sehat selalu dan panjang umur ya sayanggg ğŸ¥°<br />
        Semoga semua harapan dan doa yang ingin diwujudkan di tahun yang akan datang dapat
        digapai ğŸ’•<br />
        I love youuu bbby byyy ğŸ˜˜
      </p>
      <button class="party-btn" onclick="goToParty()">Let's Go Party ğŸ‰</button>
    </div>

    <button id="musicBtn" class="music-btn">ğŸµ Play Music</button>

    <audio id="bgMusic" loop>
      <source src="audio/happy_song.mp3" type="audio/mpeg" />
    </audio>

    <script>
      let step = 0;

      const cake = document.getElementById("cake");
      const instruction = document.getElementById("instruction");
      const finalMsg = document.getElementById("final-message");
      const music = document.getElementById("bgMusic");
      const btn = document.getElementById("musicBtn");

      // Saat user pertama kali berinteraksi (misal tekan enter)
      document.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          cake.classList.remove("visible");
          setTimeout(() => {
            if (step === 0) {
              cake.src = "images/flame_out.png";
              instruction.textContent = "Tekan Enter untuk memotong kue ğŸ‚";
              step = 1;
            } else if (step === 1) {
              cake.src = "images/cake_cut.png";
              instruction.style.display = "none";
              finalMsg.style.visibility = "visible";
              finalMsg.style.opacity = "1";
              finalMsg.style.transform = "translateY(0)";
              step = 2;
            }
            cake.classList.add("visible");
          }, 400);
        }
      });

      // Tombol musik manual
      btn.addEventListener("onclick", () => {
        if (music.paused) {
          music.muted = false;
          music.play();
          btn.textContent = "â¸ Pause Music";
        } else {
          music.pause();
          btn.textContent = "ğŸµ Play Music";
        }
      });

      // Coba autoplay saat halaman dimuat (kadang akan di-mute otomatis)
      window.addEventListener("load", () => {
        music.play().then(() => {
          btn.textContent = "â¸ Pause Music";
        }).catch(() => {
          console.log("Autoplay diblokir browser ğŸ˜… â€” akan jalan setelah interaksi");
        });
      });

      function goToParty() {
        window.location.href = "gift.html";
      }
    </script>
  </body>
</html>

